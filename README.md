# MMU Simulator

This project is a C program that simulates a simplified **Memory Management Unit (MMU)**. It is designed to demonstrate the fundamental concepts of **Virtual Memory** by performing the translation of **Virtual Addresses** to **Physical Addresses** using a hardcoded page table. The simulation includes basic handling for **Page Faults** and tracking **Reference Counts** for physical page frames.

-----

## Build Details

  * **Language:** C
  * **Standard:** C99 or later (uses standard C libraries).
  * **Compiler:** `gcc` or any standard C compiler.

-----

## Virtual Memory Address Structure

The simulator models a segmented address space:

  * **Virtual Address (16 bits):** The address generated by the CPU. It is divided to determine the page mapping.
      * **Virtual Page Number (VPN):** 4 bits (Most Significant Bits). Used as the index into the Page Table (16 entries, index 0-15).
      * **Offset:** 12 bits (Least Significant Bits). The displacement within the page (4096 possible values).
  * **Physical Address (15 bits):** The actual address used to access physical memory.
      * **Physical Page Frame Number (PPFN):** 3 bits. Identifies the physical memory block (8 possible frames, 0-7).
      * **Offset:** 12 bits. Passed directly from the virtual address to the physical address.

-----

## Functions

| Function | Description |
| :--- | :--- |
| `main()` | The core interactive control loop, responsible for handling user input and dispatching commands. |
| `MMU(int vAddress, int verbose)` | Executes the **Virtual to Physical Address Translation**. It extracts the VPN, uses the hardcoded page table to find the PPFN, and combines them with the Offset to form the physical address. Returns the PPFN (`0` to `7`) or `8` if a **Page Fault** occurs. |
| `dump(...)` | Prints the state of the simulated page table and the current **Reference Counts** (`r0` to `r7`) for each physical frame. |
| `page_fault(int vAddress, int index)` | Prints the detailed messages triggered upon detecting a **Page Fault** for an unmapped virtual page index, including a simulated page replacement action. |
| `helpScreen()` | Prints a list of all supported commands. |
| `convertBinary(int dec)` | Converts a decimal integer to a 16-element integer array representing its binary form. **Note:** Uses dynamic memory allocation (`malloc`). |
| `convertDecimal(int bArray[], int bits)` | Converts a binary array back to a decimal integer value. |

-----

## Build and Run Instructions

### Build

Compile the source code using `gcc`:

```bash
gcc -o mmu_sim mmu_sim.c
```

### Running the Simulator

Execute the compiled program:

```bash
./mmu_sim
```

The simulator will prompt for commands with `mmu >`.

### Interactive Commands

| Command | Action |
| :--- | :--- |
| `q` | **Quit** the program. |
| `?` | Print the **help** screen. |
| `on` | Turns **Verbose Mode On**. Address translations will show detailed breakdown (address, offset, block number, page table location). |
| `off` | Turns **Verbose Mode Off**. Only the resulting physical address is displayed. |
| `dump` | Displays the current simulated **Page Table** and **Reference Counts**. |
| `textbook` | Placeholder command (prints a message indicating the intended setup). |
| `[number]` | Enter a decimal **Virtual Address** (e.g., `8196`) to initiate translation. |
